<!DOCTYPE html>
<html lang="es">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
   <title>Asteroid Hunter Pro - Business Edition</title>
   <script src="https://cdn.tailwindcss.com"></script>
   <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
   <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
   <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
   <style>
       @import url('https://fonts.googleapis.com/css2?family=Goldman:wght@400;700&display=swap');
       
       :root {
           --neon-cyan: #06b6d4;
           --neon-gold: #eab308;
       }

       body {
           margin: 0;
           background: #000;
           overflow: hidden;
           font-family: 'Goldman', sans-serif;
           color: white;
       }

       .bg-space {
           background: radial-gradient(circle at 50% 50%, #111827 0%, #000 100%);
       }

       .btn-primary {
           background: linear-gradient(135deg, #0891b2 0%, #0e7490 100%);
           box-shadow: 0 0 20px rgba(6, 182, 212, 0.4);
       }

       .btn-gold {
           background: linear-gradient(135deg, #eab308 0%, #ca8a04 100%);
           box-shadow: 0 0 20px rgba(234, 179, 8, 0.3);
       }

       .pulse-neon {
           animation: pulse-border 2s infinite;
       }

       @keyframes pulse-border {
           0% { box-shadow: 0 0 5px var(--neon-cyan); }
           50% { box-shadow: 0 0 20px var(--neon-cyan); }
           100% { box-shadow: 0 0 5px var(--neon-cyan); }
       }

       .floating {
           animation: float 3s ease-in-out infinite;
       }

       @keyframes float {
           0%, 100% { transform: translateY(0px); }
           50% { transform: translateY(-10px); }
       }
   </style>
</head>
<body class="bg-space">
   <div id="root"></div>

   <script type="text/babel">
       const { useState, useEffect, useCallback } = React;

       const App = () => {
           // --- ESTADO ---
           const [view, setView] = useState('MENU'); // MENU, GAME, SHOP, REWARD
           const [score, setScore] = useState(0);
           const [gems, setGems] = useState(parseInt(localStorage.getItem('ahp_gems')) || 0);
           const [highScore, setHighScore] = useState(parseInt(localStorage.getItem('ahp_hs')) || 0);
           const [pendingGems, setPendingGems] = useState(0);
           
           // Stats mejorables
           const [upgrades, setUpgrades] = useState(JSON.parse(localStorage.getItem('ahp_upgrades')) || {
               damage: 1,
               crit: 1,
               luck: 1
           });

           // --- PERSISTENCIA ---
           useEffect(() => {
               localStorage.setItem('ahp_gems', gems);
               localStorage.setItem('ahp_upgrades', JSON.stringify(upgrades));
               if (score > highScore) {
                   setHighScore(score);
                   localStorage.setItem('ahp_hs', score);
               }
           }, [gems, upgrades, score]);

           // --- AUDIO ENGINE ---
           const playSfx = useCallback((freq, type = 'square', duration = 0.1, vol = 0.1) => {
               try {
                   const ctx = new (window.AudioContext || window.webkitAudioContext)();
                   const osc = ctx.createOscillator();
                   const gain = ctx.createGain();
                   osc.type = type;
                   osc.frequency.setValueAtTime(freq, ctx.currentTime);
                   gain.gain.setValueAtTime(vol, ctx.currentTime);
                   gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + duration);
                   osc.connect(gain);
                   gain.connect(ctx.destination);
                   osc.start();
                   osc.stop(ctx.currentTime + duration);
               } catch(e) {}
           }, []);

           // --- L√ìGICA DE NEGOCIO ---
           const handleAction = () => {
               const baseGain = 10 * upgrades.damage;
               const isCrit = Math.random() < (upgrades.crit * 0.1);
               const finalGain = isCrit ? baseGain * 2 : baseGain;
               
               setScore(s => s + finalGain);
               playSfx(isCrit ? 800 : 400, 'square', 0.05);
               if (navigator.vibrate) navigator.vibrate(isCrit ? 30 : 10);
           };

           const endMission = () => {
               const baseGems = Math.floor(score / 20);
               const luckBonus = Math.floor(Math.random() * upgrades.luck * 10);
               setPendingGems(baseGems + luckBonus);
               setView('REWARD');
               playSfx(200, 'sawtooth', 0.4);
           };

           const claimReward = (multiplier = 1) => {
               setGems(prev => prev + (pendingGems * multiplier));
               setScore(0);
               setView('MENU');
               playSfx(600, 'sine', 0.2);
           };

           const buyUpgrade = (key) => {
               const cost = upgrades[key] * 500;
               if (gems >= cost && upgrades[key] < 10) {
                   setGems(g => g - cost);
                   setUpgrades(prev => ({ ...prev, [key]: prev[key] + 1 }));
                   playSfx(900, 'sine', 0.2);
               }
           };

           return (
               <div className="w-full h-screen flex flex-col items-center justify-center p-6 select-none touch-none">
                   
                   {/* --- HEADER GLOBAL --- */}
                   <div className="absolute top-0 left-0 w-full p-6 flex justify-between items-center z-50">
                       <div className="bg-black/40 backdrop-blur-md px-4 py-2 rounded-full border border-white/10 flex items-center gap-2">
                           <span className="text-yellow-400">üíé</span>
                           <span className="font-bold text-lg">{gems.toLocaleString()}</span>
                       </div>
                       {view === 'GAME' && (
                           <div className="text-center">
                               <p className="text-[10px] text-cyan-400 font-bold uppercase tracking-widest">Score</p>
                               <p className="text-3xl font-black italic">{score.toLocaleString()}</p>
                           </div>
                       )}
                   </div>

                   {/* --- VISTA: MEN√ö --- */}
                   {view === 'MENU' && (
                       <div className="text-center space-y-12 animate-in fade-in zoom-in duration-500">
                           <div className="floating">
                               <h1 className="text-7xl font-black italic tracking-tighter leading-tight bg-gradient-to-b from-white via-cyan-400 to-blue-600 bg-clip-text text-transparent drop-shadow-2xl">
                                   ASTEROID<br/>HUNTER
                               </h1>
                               <p className="text-cyan-500 font-bold tracking-[0.5em] text-[10px] uppercase mt-2">Elite Combat Unit</p>
                           </div>

                           <div className="flex flex-col gap-4 w-72">
                               <button onClick={() => { setView('GAME'); playSfx(400); }} className="btn-primary py-5 rounded-2xl font-black text-xl uppercase tracking-widest active:scale-95 transition-all">
                                   Deploy Mission
                               </button>
                               <button onClick={() => setView('SHOP')} className="bg-slate-900 border border-white/10 py-4 rounded-2xl font-bold uppercase text-sm hover:bg-slate-800">
                                   Ship Hangar
                               </button>
                           </div>

                           <div className="opacity-40 text-[10px] tracking-widest uppercase">
                               Personal Best: {highScore}
                           </div>
                       </div>
                   )}

                   {/* --- VISTA: JUEGO --- */}
                   {view === 'GAME' && (
                       <div className="w-full h-full flex flex-col items-center justify-center gap-20">
                           <div
                               onPointerDown={handleAction}
                               className="w-64 h-64 rounded-full bg-cyan-500/5 border-2 border-cyan-500/30 flex items-center justify-center active:scale-90 transition-all pulse-neon"
                           >
                               <div className="w-48 h-48 rounded-full bg-gradient-to-tr from-cyan-600 to-blue-600 flex items-center justify-center shadow-inner">
                                   <div className="text-center">
                                       <span className="block text-3xl font-black italic">ENGAGE</span>
                                       <span className="text-[8px] opacity-60 uppercase font-bold">Tap to Fire</span>
                                   </div>
                               </div>
                           </div>

                           <button onClick={endMission} className="px-10 py-3 bg-red-600/10 border border-red-500/20 text-red-500 rounded-full text-xs font-bold uppercase tracking-widest active:bg-red-600/20">
                               Extract Gear
                           </button>
                       </div>
                   )}

                   {/* --- VISTA: RECOMPENSA (AD SIMULATOR) --- */}
                   {view === 'REWARD' && (
                       <div className="w-full max-w-sm bg-slate-900/90 backdrop-blur-xl border border-white/10 rounded-[3rem] p-10 text-center animate-in slide-in-from-bottom duration-500">
                           <div className="text-6xl mb-6">üì¶</div>
                           <h2 className="text-2xl font-black mb-2">MISSION RECOVERED</h2>
                           <p className="text-slate-400 text-sm mb-10 italic">Found {pendingGems} gems in the sector.</p>
                           
                           <div className="space-y-4">
                               <button onClick={() => claimReward(2)} className="w-full btn-gold py-5 rounded-2xl font-black text-black text-lg flex items-center justify-center gap-3 active:scale-95 transition-all">
                                   <span>üì∫</span> DOUBLE GEMS (X2)
                               </button>
                               <button onClick={() => claimReward(1)} className="w-full py-4 text-slate-500 font-bold text-sm hover:text-white">
                                   Collect Normal
                               </button>
                           </div>
                       </div>
                   )}

                   {/* --- VISTA: TIENDA --- */}
                   {view === 'SHOP' && (
                       <div className="w-full h-full flex flex-col p-10 animate-in slide-in-from-right duration-300">
                           <button onClick={() => setView('MENU')} className="text-cyan-500 font-bold text-xs mb-8 tracking-widest">‚Üê RETURN TO BASE</button>
                           <h2 className="text-4xl font-black mb-10 italic">HANGAR</h2>
                           
                           <div className="space-y-6 flex-1 overflow-y-auto pr-2">
                               {[
                                   { id: 'damage', name: 'Plasma Cannon', sub: 'Increase points per tap', icon: 'üî´' },
                                   { id: 'crit', name: 'Critical Core', sub: 'Chance to double points', icon: '‚ö°' },
                                   { id: 'luck', name: 'Loot Scanner', sub: 'Find more gems in space', icon: 'üì°' }
                               ].map(item => (
                                   <div key={item.id} className="p-6 bg-white/5 rounded-[2rem] border border-white/5 flex flex-col gap-4">
                                       <div className="flex justify-between items-center">
                                           <div>
                                               <h3 className="font-black text-lg uppercase tracking-tighter">{item.icon} {item.name}</h3>
                                               <p className="text-[10px] text-slate-500 font-bold uppercase">{item.sub}</p>
                                           </div>
                                           <span className="bg-cyan-500/20 text-cyan-400 px-3 py-1 rounded-full text-xs font-black">LVL {upgrades[item.id]}</span>
                                       </div>
                                       <button
                                           onClick={() => buyUpgrade(item.id)}
                                           className={`w-full py-4 rounded-xl font-black transition-all ${upgrades[item.id] >= 10 ? 'bg-slate-800 text-slate-500' : 'btn-gold text-black active:scale-95'}`}
                                       >
                                           {upgrades[item.id] >= 10 ? 'MAXED OUT' : `UPGRADE (üíé ${upgrades[item.id] * 500})`}
                                       </button>
                                   </div>
                               ))}
                           </div>
                       </div>
                   )}
               </div>
           );
       };

       const root = ReactDOM.createRoot(document.getElementById('root'));
       root.render(<App />);
   </script>
</body>
</html>